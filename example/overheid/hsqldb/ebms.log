/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
--\u000d\u000a-- Copyright 2013 Clockwork\u000d\u000a--\u000d\u000a-- Licensed under the Apache License, Version 2.0 (the "License");\u000d\u000a-- you may not use this file except in compliance with the License.\u000d\u000a-- You may obtain a copy of the License at\u000d\u000a--\u000d\u000a--   http://www.apache.org/licenses/LICENSE-2.0\u000d\u000a--\u000d\u000a-- Unless required by applicable law or agreed to in writing, software\u000d\u000a-- distributed under the License is distributed on an "AS IS" BASIS,\u000d\u000a-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\u000d\u000a-- See the License for the specific language governing permissions and\u000d\u000a-- limitations under the License.\u000d\u000a--\u000d\u000a\u000d\u000aCREATE TABLE cpa\u000d\u000a(\u000d\u000a\u0009cpa_id\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL PRIMARY KEY,\u000d\u000a\u0009cpa\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009CLOB\u0009\u0009\u0009\u0009\u0009\u0009NOT NULL\u000d\u000a)
CREATE TABLE url\u000d\u000a(\u000d\u000a\u0009source\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL UNIQUE,\u000d\u000a\u0009destination\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL\u000d\u000a)
CREATE TABLE ebms_message\u000d\u000a(\u000d\u000a\u0009time_stamp\u0009\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009cpa_id\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009conversation_id\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009message_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009message_nr\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009DEFAULT 0 NOT NULL,\u000d\u000a\u0009ref_to_message_id\u0009VARCHAR(256)\u0009\u0009NULL,\u000d\u000a\u0009time_to_live\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009persist_time\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009from_party_id\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009from_role\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NULL,\u000d\u000a\u0009to_party_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009to_role\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NULL,\u000d\u000a\u0009service\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009action\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009content\u0009\u0009\u0009\u0009\u0009\u0009CLOB\u0009\u0009\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009status\u0009\u0009\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009status_time\u0009\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009PRIMARY KEY (message_id,message_nr),\u000d\u000a\u0009FOREIGN KEY (cpa_id) REFERENCES cpa(cpa_id)\u000d\u000a)
CREATE TABLE ebms_attachment\u000d\u000a(\u000d\u000a\u0009message_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009message_nr\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009order_nr\u0009\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009name\u0009\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NULL,\u000d\u000a\u0009content_id \u0009\u0009\u0009\u0009VARCHAR(256) \u0009\u0009NOT NULL,\u000d\u000a\u0009content_type\u0009\u0009\u0009VARCHAR(255)\u0009\u0009NOT NULL,\u000d\u000a\u0009content\u0009\u0009\u0009\u0009\u0009\u0009BLOB\u0009\u0009\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009FOREIGN KEY (message_id,message_nr) REFERENCES ebms_message (message_id,message_nr)\u000d\u000a)
CREATE TABLE ebms_event\u000d\u000a(\u000d\u000a\u0009cpa_id\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009channel_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009message_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL UNIQUE,\u000d\u000a\u0009message_nr\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009DEFAULT 0 NOT NULL,\u000d\u000a\u0009time_to_live\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009time_stamp\u0009\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009is_confidential\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009retries\u0009\u0009\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009DEFAULT 0 NOT NULL,\u000d\u000a\u0009server_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009\u0009NULL,\u000d\u000a\u0009FOREIGN KEY (cpa_id) REFERENCES cpa(cpa_id),\u000d\u000a\u0009FOREIGN KEY (message_id,message_nr) REFERENCES ebms_message (message_id,message_nr)\u000d\u000a)
CREATE TABLE ebms_event_log\u000d\u000a(\u000d\u000a\u0009message_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL,\u000d\u000a\u0009message_nr\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009DEFAULT 0 NOT NULL,\u000d\u000a\u0009time_stamp\u0009\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009uri\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NULL,\u000d\u000a\u0009status\u0009\u0009\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009error_message\u0009\u0009\u0009CLOB\u0009\u0009\u0009\u0009\u0009\u0009NULL,\u000d\u000a\u0009FOREIGN KEY (message_id,message_nr) REFERENCES ebms_message (message_id,message_nr)\u000d\u000a)
CREATE TABLE ebms_message_event\u000d\u000a(\u000d\u000a\u0009message_id\u0009\u0009\u0009\u0009VARCHAR(256)\u0009\u0009NOT NULL UNIQUE,\u000d\u000a\u0009message_nr\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009DEFAULT 0 NOT NULL,\u000d\u000a\u0009event_type\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009time_stamp\u0009\u0009\u0009\u0009TIMESTAMP\u0009\u0009\u0009\u0009NOT NULL,\u000d\u000a\u0009processed\u0009\u0009\u0009\u0009\u0009SMALLINT\u0009\u0009\u0009\u0009DEFAULT 0 NOT NULL,\u000d\u000a\u0009FOREIGN KEY (message_id,message_nr) REFERENCES ebms_message (message_id,message_nr)\u000d\u000a)
DISCONNECT
/*C1*/INSERT INTO LOB_IDS VALUES(1,38942,0,40)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 2
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=0
INSERT INTO BLOCKS VALUES(0,3,0)
INSERT INTO BLOCKS VALUES(3,2147483644,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=0
INSERT INTO LOBS VALUES(0,3,0,1)
COMMIT
/*C5*/SET SCHEMA PUBLIC
INSERT INTO CPA VALUES('cpaStubEBF.rm.https.signed',1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=1
INSERT INTO LOB_IDS VALUES(1,38942,1,40)
COMMIT
/*C4*/SET SCHEMA PUBLIC
INSERT INTO URL VALUES('https://localhost:8888/digipoortStub','https://digipoort:8443/ebms')
COMMIT
